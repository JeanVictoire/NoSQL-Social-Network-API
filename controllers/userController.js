const{User:User,Thought:Thought}=require("../models"),userController={getAllUsers(e,s){User.find({}).then((e=>s.json(e))).catch((e=>{console.log(e),s.status(400).json(e)}))},getUserById({params:e},s){User.findOne({_id:e.id}).populate({path:"thoughts",select:"-__v"}).then((e=>{e?s.json(e):s.status(404).json({message:"Not a single user with this ID has been found"})})).catch((e=>console.log(e)))},createUser({body:e},s){User.create(e).then((e=>s.json(e))).catch((e=>s.status(400).json(e)))},updateUser({params:e,body:s},n){User.findOneAndUpdate({_id:e.id},s,{new:!0,runValidators:!0}).then((e=>{e?n.json(e):n.status(404).json({message:"Not a single user with this ID has been found"})})).catch((e=>console.log(e)))},deleteUser({params:e},s){User.findOneAndDelete({_id:e.id}).then((e=>{e?s.json(e):s.status(404).json({message:"Not a single user with this ID has been found"})})).catch((e=>console.log(e)))},addFriend({params:e},s){User.findOneAndUpdate({_id:e.userId},{$addToSet:{friends:e.friendId}},{new:!0,runValidators:!0}).then((e=>{e?s.json(e):s.status(404).json({message:"Not a single user with this ID has been found!"})})).catch((e=>console.log(e)))},deleteFriend({params:e},s){User.findOneAndUpdate({_id:e.userId},{$pull:{friends:e.friendId}},{new:!0}).then((e=>{e?s.json(e):s.status(404).json({message:"Not a single user with this ID has been found"})})).catch((e=>console.log(e)))}};module.exports=userController;